$(".burger").click(function () {
    $(".header").toggleClass("_open")
    $("body").toggleClass("fixed-body")
})

Fancybox.defaults.placeFocusBack = false

$(".spoiler__show").click(function () {
    $(this).parents(".spoiler").toggleClass("_active")
    $(this).siblings(".spoiler__hidden").slideToggle()
})

$(".tile-card__img").click(function () {
    console.log("open")
    $("body").addClass("_white-fancy")
})

function mainSlider() {
    var swiper = new Swiper('.main .swiper-container', {
        slidesPerView: 1,
        spaceBetween: 10,
        effect: 'fade',
        autoplay:{
            delay: 2000
        },
        fadeEffect: {
            // crossFade: true
        },
        pagination: {
            el: '.main .swiper-pagination',
            type: 'bullets',
            clickable: true,
        }
    })
}

function gallery() {
    var swiper = new Swiper(".gallery .mySwiper", {
        spaceBetween: 30,
        slidesPerView: 4,
        freeMode: true,
        watchSlidesProgress: true,
    });
    var swiper2 = new Swiper(".gallery .mySwiper2", {
        spaceBetween: 10,
        thumbs: {
            swiper: swiper,
        },
        navigation: {
            nextEl: '.gallery .swiper-button-next',
            prevEl: '.gallery .swiper-button-prev',
        },
        pagination: {
            el: '.gallery .swiper-pagination',
            type: 'bullets',
            clickable: true,
        }
    });
}


mainSlider()
gallery()

ymaps.ready(init);

function init() {
    let coords
    let zoom = 16
    setMapData()


    let myMap = new ymaps.Map("map", {
        center:coords[0],
        zoom
    });

    myMap.behaviors.disable('scrollZoom');
    addPlaceMarks()


    $(".contacts-select").click(function () {
        let template = $(this).html()
        $(".contacts__mob-select").html(template)
        $(".contacts__mob-select").removeClass("_active")

        if(!$(this).hasClass("_active")){
            $(".contacts-select").removeClass("_active")
            $(this).addClass("_active")
            $(".contacts-select__hidden").slideUp()
            $(this).find(".contacts-select__hidden").slideDown()
        } else {
            return
        }

        setMapData()
        myMap.setCenter(coords[0], zoom, {});
        myMap.geoObjects.removeAll()
        addPlaceMarks()
    })


    function setMapData() {
        coords = $(".contacts-select._active").data("coords")
    }


    function addPlaceMarks() {
        let addresses = document.querySelectorAll(".contacts-select._active .contacts-select__item")
        coords.forEach((el, index, coords) => {
            let template = addresses[index].innerHTML
            console.log(template)
            let placemark = new ymaps.Placemark(el, {
                    balloonContentHeader: ``,
                    balloonContentBody: `
                    ${template}
                `,
                    balloonContentFooter: '',
                    hintContent: 'Фитнес-клуб AR City Gym на \n' +
                        'Мельникова',
                },
                {
                    iconLayout: 'default#image',
                    iconImageSize: [36, 48],
                }
            );
            myMap.geoObjects.add(placemark);
        })

        if(coords.length>1){
            myMap.setBounds(myMap.geoObjects.getBounds(), {
                checkZoomRange: true,
                zoomMargin: 35
            });
        }
    }
}


$(".contacts__mob-select").click(function () {
    $(this).addClass("_active")
})


$(document).mouseup(function(e) {
    var div = $('.contacts__cities');
    if (!div.is(e.target) && div.has(e.target).length === 0) {
        if($(".contacts__mob-select").hasClass("_active")){
            $(".contacts__mob-select").removeClass("_active")
        }
    }
});

$(document).ready(function() {
    // $('input[type="tel"]').mask('+7 999 999-9999', { autoclear: false }, { placeholder: '+7             ' });


});

//# sourceMappingURL=../sourcemaps/main.min.js.map
